(this["webpackJsonpsnake-game"]=this["webpackJsonpsnake-game"]||[]).push([[0],{11:function(e,t,n){},13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(6),o=n.n(r),l=(n(11),n(2)),u=n(5),i=n(3),s=n(0),j={start:!1,game:!0,end:!1},v=function(e,t){switch(t.type){case"START_SCREEN":return Object(i.a)(Object(i.a)({},e),{},{start:!0,game:!1,end:!1});case"GAME_START":return Object(i.a)(Object(i.a)({},e),{},{start:!1,game:!0,end:!1});case"GAMEOVER":return Object(i.a)(Object(i.a)({},e),{},{start:!1,game:!1,end:!0});default:return console.log("Invalide action type: ".concat(t.type)),e}},d=Object(c.createContext)(),b=function(){return Object(c.useContext)(d)},f=function(e){var t=Object(c.useReducer)(v,j),n=Object(l.a)(t,2),a=n[0],r=n[1];return Object(s.jsx)(d.Provider,Object(i.a)({value:[a,r]},e))};var O=n.p+"static/media/gameover.a5422d4b.PNG",h=(n(13),function e(t){Object(u.a)(this,e),this.value=t,this.next=null}),w=function e(t){Object(u.a)(this,e);var n=new h(t);this.head=n,this.tail=n},m="UP",x="RIGHT",g="DOWN",p="LEFT",S=function(e){for(var t=1,n=[],c=0;c<e;c++){for(var a=[],r=0;r<e;r++)a.push(t++);n.push(a)}return n},E=function(e,t){return t===m?{row:e.row-1,col:e.col}:t===x?{row:e.row,col:e.col+1}:t===g?{row:e.row+1,col:e.col}:t===p?{row:e.row,col:e.col-1}:void 0},y=function(e,t){var n=e.row,c=e.col;return n<0||c<0||(n>=t.length||c>=t[0].length)},A=function(e){return"ArrowUp"===e?m:"ArrowRight"===e?x:"ArrowDown"===e?g:"ArrowLeft"===e?p:""},M=function(e,t){if(null===e.next)return t;var n=e.value,c=n.row,a=n.col,r=e.next.value,o=r.row,l=r.col;return o===c&&l===a+1?x:o===c&&l===a-1?p:l===a&&o===c+1?g:l===a&&o===c-1?m:""},R=function(e,t){var n=M(e,t),c=k(n),a={row:e.value.row,col:e.value.col};return E(a,c)},k=function(e){return e===m?g:e===x?p:e===g?m:e===p?x:void 0},N=function(e,t,n,c){var a="cell";return e===t&&(a=n?"cell cell-purple":"cell cell-red"),c.has(e)&&(a="cell cell-green"),a},G=function(){var e=Object(c.useState)(0),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(S(15)),o=Object(l.a)(r,2),u=o[0],i=(o[1],Object(c.useState)(new w(function(e){var t=e.length,n=e[0].length,c=Math.round(t/3),a=Math.round(n/3);return{row:c,col:a,cell:e[c][a]}}(u)))),j=Object(l.a)(i,2),v=j[0],d=(j[1],Object(c.useState)(new Set([v.head.value.cell]))),f=Object(l.a)(d,2),O=f[0],m=f[1],g=Object(c.useState)(v.head.value.cell+5),p=Object(l.a)(g,2),G=p[0],T=p[1],I=Object(c.useState)(x),C=Object(l.a)(I,2),F=C[0],L=C[1],P=Object(c.useState)(!1),D=Object(l.a)(P,2),J=D[0],U=D[1],V=b(),_=Object(l.a)(V,2),z=_[0],B=z.game,H=(z.gameOver,_[1]),W=Object(c.useState)(!0),q=Object(l.a)(W,2),K=q[0],Q=q[1];Object(c.useEffect)((function(){window.addEventListener("keydown",(function(e){X(e)}))}),[]),function(e,t){var n=Object(c.useRef)();Object(c.useEffect)((function(){n.current=e}),[e]),Object(c.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){K&&Y()}),150);var X=function(e){var t=A(e.key);""!==t&&(k(t)===F&&O.size>1||L(t))},Y=function(){var e={row:v.head.value.row,col:v.head.value.col},t=E(e,F);if(y(t,u))te();else{var n=u[t.row][t.col];if(O.has(n))te();else{var c=new h({row:t.row,col:t.col,cell:n}),a=v.head;v.head=c,a.next=c;var r=new Set(O);r.delete(v.tail.value.cell),r.add(n),v.tail=v.tail.next,null===v.tail&&(v.tail=v.head),n===G&&(Z(r),J&&$(),ee(r)),m(r)}}},Z=function(e){var t=R(v.tail,F);if(!y(t,u)){var n=u[t.row][t.col],c=new h({row:t.row,col:t.col,cell:n}),a=v.tail;v.tail=c,v.tail.next=a,e.add(n)}},$=function(){var e=M(v.tail,F),t=k(e);L(t),function(e){for(var t=null,n=e;null!==n;){var c=n.next;n.next=t,t=n,n=c}}(v.tail);var n=v.head;v.head=v.tail,v.tail=n},ee=function(e){for(var t,c,r;c=1,r=225,t=Math.floor(Math.random()*(r-c+1)+c),e.has(t)||G===t;);var o=Math.random()<.3;T(t),U(o),a(n+1)},te=function(){H({type:"GAMEOVER"}),Q(!1),console.log("gameover")};return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{style:{display:B?"block":"none"},children:[Object(s.jsxs)("h1",{children:["Score: ",n]}),Object(s.jsx)("div",{className:"board",children:u.map((function(e,t){return Object(s.jsx)("div",{className:"row",children:e.map((function(e,t){var n=N(e,G,J,O);return Object(s.jsx)("div",{className:n},t)}))},t)}))})]})})};var T=function(){var e=b(),t=Object(l.a)(e,2),n=t[0].end;return t[1],Object(s.jsx)("img",{src:O,alt:"Gameover",style:{display:n?"block":"none"}})};n(14);var I=function(){var e=b(),t=Object(l.a)(e,2),n=t[0];return n.start,n.game,n.end,t[1],Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(G,{}),Object(s.jsx)(T,{})]})})};o.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(f,{children:Object(s.jsx)(I,{})})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.3d9b260b.chunk.js.map